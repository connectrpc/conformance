FROM node:16-alpine

WORKDIR /workspace

ENV CHROME_BIN /usr/bin/chromium-browser
RUN apk add chromium
RUN apk add --update --no-cache \
    ca-certificates \
    git \
    rm -rf /var/cache/apk/*
COPY web/package.json web/package-lock.json /workspace/
COPY web/.npmrc /workspace/
COPY web/tsconfig.json web/karma.conf.js /workspace/
COPY web/gen /workspace/gen
COPY web/spec /workspace/spec
RUN npm install
