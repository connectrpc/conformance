# gRPC-web conformance client

This directory contains a conformance client built with the [gRPC-web](https://github.com/grpc/grpc-web) library. Its
purpose is to corroborate testing results with Connect clients and servers using the gRPC-web protocol.

It is run against both the Connect reference server and the gRPC-Go reference server during conformance tests.

The basic architecture uses [WebdriverIO](https://webdriver.io/) to run a headless Chrome shell, which in turn executes
the gRPC-web client.

Note that this implementation makes use of both [Protobuf-ES](https://github.com/bufbuild/protobuf-es) and
[google-protobuf](https://github.com/protocolbuffers/protobuf-javascript) plugins for its generated code. This is
because the gRPC-web client requires code generated by google-protobuf. However, the full implementation of the
conformance runner requires the ability to create messages from JSON for communicating with the headless browser running
inside Webdriver.

Unfortunately, the google-protobuf API does not provide the capability for constructing messages from JSON. Oddly enough,
it only provides a `toObject` function which converts a message _to_ JSON. Oddly enough, there is no function to go back
the other way.

For an example of where this is needed, see [conformance-runner.ts](./conformance-runner.ts).
