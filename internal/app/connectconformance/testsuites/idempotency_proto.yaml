name: Idempotency
relevantProtocols:
  - PROTOCOL_CONNECT
relevantCompressions:
  - COMPRESSION_IDENTITY
relevantCodecs:
  - CODEC_PROTO
testCases:
- request:
    testName: idempotent unary success proto
    service: connectrpc.conformance.v1.ConformanceService
    method: IdempotentUnary
    streamType: STREAM_TYPE_UNARY
    codec: CODEC_PROTO
    useGetHttpMethod: true
    requestHeaders:
    - name: X-Conformance-Test
      value: ["Value1","Value2"]
    requestMessages:
    - "@type": type.googleapis.com/connectrpc.conformance.v1.IdempotentUnaryRequest
      responseDefinition:
        responseHeaders:
        - name: x-custom-header
          value: ["foo","bar","baz"]
        responseData: "dGVzdCByZXNwb25zZQ=="
        responseTrailers:
        - name: x-custom-trailer
          value: ["bing","quux"]
